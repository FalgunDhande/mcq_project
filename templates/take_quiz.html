{% extends "base.html" %}
{% block content %}
<h2>{{ quiz.title }}</h2>
<p>Time Remaining: <strong id="countdown" data-deadline="{{ deadline_iso }}"></strong></p>
<form id="quiz-form" method="post" action="{{ url_for('submit_quiz', quiz_id=quiz.id) }}">
  <input type="hidden" name="attempt_id" value="{{ attempt_id }}">
  {% for q in questions %}
    <article>
      <h4>Q{{ loop.index }}. {{ q.text }}</h4>
      {% for opt,label in [('A', q.option_a), ('B', q.option_b), ('C', q.option_c), ('D', q.option_d)] %}
        <label>
          <input type="radio" name="q_{{ q.id }}" value="{{ opt }}">
          {{ opt }}) {{ label }}
        </label><br>
      {% endfor %}
      <small class="badge">{{ q.subject.name if q.subject else 'General' }}{% if q.chapter %} â€¢ {{ q.chapter.name }}{% endif %}</small>
    </article>
  {% endfor %}
  <button type="submit">Submit</button>
</form>
<script src="{{ url_for('static', filename='js/timer.js') }}"></script>
{% endblock %}
