{% extends "base.html" %}{% block content %}
<h2>Admin Dashboard</h2>
<div class="cards"><article><header>Users</header><h3>{{ stats.users }}</h3></article>
<article><header>Quizzes</header><h3>{{ stats.quizzes }}</h3></article>
<article><header>Questions</header><h3>{{ stats.questions }}</h3></article>
<article><header>Attempts</header><h3>{{ stats.attempts }}</h3></article></div>

<h3>Create User</h3>
<form method="post" action="{{ url_for('admin_create_user') }}">
<div class="grid"><label>Username <input name="username" required></label>
<label>Password <input type="password" name="password" required></label>
<label>Role <select name="role"><option value="user">User</option><option value="admin">Admin</option></select></label></div>
<button type="submit">Create</button></form>

<h3>Create Quiz</h3>
<form method="post" action="{{ url_for('admin_create_quiz') }}">
<div class="grid"><label>Title <input name="title" required></label>
<label>Duration (minutes) <input type="number" name="duration" min="1" value="10" required></label>
<label>Negative Marking <input name="negative" value="0"></label>
<label>Marks per question <input name="marks" value="1"></label></div>
<button type="submit">Create Quiz</button></form>

<h3>Upload Questions (Bulk)</h3>
<form method="post" enctype="multipart/form-data" action="{{ url_for('admin_upload_questions') }}">
<div class="grid"><label>Quiz <select name="quiz_id" required>{% for q in quizzes %}<option value="{{ q.id }}">{{ q.title }}</option>{% endfor %}</select></label>
<label>File (CSV / XLSX / PDF) <input type="file" name="file" required></label></div>
<small>Optional columns: <code>subject, chapter</code></small>
<button type="submit">Upload</button></form>

<h3>Recent Attempts</h3>
<table><thead><tr><th>User</th><th>Quiz</th><th>Score</th><th>When</th></tr></thead>
<tbody>{% for a in recent_attempts %}<tr><td>{{ a.user.username }}</td><td>{{ a.quiz.title }}</td><td>{{ a.score }}</td><td>{{ a.submitted_at or a.started_at }}</td></tr>{% endfor %}</tbody></table>
{% endblock %}